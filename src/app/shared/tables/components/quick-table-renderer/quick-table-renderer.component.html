<div class="quick-table">
  <mat-table [dataSource]="data">
    <ng-container *ngFor="let column of columns$ | async | onlyVisibleColumns">
      <ng-container
        matColumnDef="{{ column.key }}"
        [sticky]="column.stickyLeft"
        [stickyEnd]="column.stickyRight">
        <mat-header-cell
          *matHeaderCellDef
          [style.flex-basis]="column | columnWidth: (actions$ | async)"
          [ngClass]="column.cssClass">
          <app-header-cell-content
            [column]="column"
            [columns]="columns$ | async">
          </app-header-cell-content>
        </mat-header-cell>

        <mat-cell
          *matCellDef="let model"
          [style.flex-basis]="column | columnWidth: (actions$ | async)"
          [ngClass]="column.cssClass">
          <app-cell-content
            [customCellContentTemplate]="customCellContentTemplate"
            [column]="column"
            [model]="model"
            [actions]="actions$ | async">
          </app-cell-content>
        </mat-cell>
      </ng-container>
    </ng-container>

    <mat-header-row
      *matHeaderRowDef="
        columns$ | async | onlyVisibleColumns | columnKeys;
        sticky: true
      ">
    </mat-header-row>

    <mat-row
      *matRowDef="
        let model;
        columns: columns$ | async | onlyVisibleColumns | columnKeys
      ">
    </mat-row>
  </mat-table>
</div>
